<html>

<head>
  <link rel="stylesheet" type="text/css" href="styles.css" />
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <link rel="stylesheet" type="text/css"
    href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.6/themes/cupertino/jquery-ui.css" />
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
</head>

<style>
  #player1 {
    position: absolute;
    width: 45%;
    height: 45%;
    top: 20%;
    left: 20%;
    margin: 0;
    padding: 0;
    z-index: 99;
    border: 2px solid purple;
    background: #fefefe;
  }

  #title {
    font-family: monospace;
    background: purple;
    color: white;
    font-size: 24px;
    height: 30px;
    text-align: center;
  }

  html {
    font-size: calc(16px + 1vw);
    font-family: sans-serif;
  }
</style>


<body>
  <!-- <input type="button" name="play" value="Play" id="play" style="width:40px; height:20px" onclick="myFunction()" /> -->
  <div id="player1"></div>

  <input type="button" style="width:40px;height:40px;color: red" value="stop" onclick="stopPlayer()">
  <!-- COMMENTED CODE FOR TESTING OF MULTIPLE CAMERA VIEWS -->
  <!-- <div id="player2"></div>
  <div id="player3"></div>
  <div id="player4"></div> -->

  <webview id="foo" src="http://192.168.0.109/zygal/home.php" nodeintegration style="width:100%;height:100%">
    <script>
      const env = require('./global_env.js');
      const customTitlebar = require('@inceldes/cet');

      // Menu.getApplicationMenu()
      new customTitlebar.Titlebar({
        backgroundColor: customTitlebar.Color.fromHex(env.titleBarColor),
        menu: false,
        drag: true,
        maximizable: true,
        minimizable: true,
        icon: env.icon
      });
      /* COMMENTED CODE FOR TESTING OF MULTIPLE CAMERA VIEWS */
      // var player2 = new wjs("#player2").addPlayer(conf);
      // var player3 = new wjs("#player3").addPlayer(conf);
      // var player4 = new wjs("#player4").addPlayer(conf);
      var conf = {
        wcjs: require('wcjs-prebuilt'),
        multiscreen: true,
        autoplay: true,
        loop: true,
      };

      var wjs = require("wcjs-player");
      // wjs("#player1").addPlayer({ id: "webchimera", theme: "sleek", mouseevents: 0, autoplay: 1 });
      const webview = document.querySelector('webview');
      var player1 = new wjs("#player1").addPlayer(conf);
      webview.addEventListener('ipc-message', (event) => {
        // wjs("#player1").addPlaylist(myplaylist);
        // wjs("#player1").qmlLoaded(function () {
        //   this.onClicked(function (button) {
        //     span.innerHTML = "You Clicked: " + button;
        //   });
        // });
        console.log(event.channel);
        console.log(event.args[0]);
        play(player1);
        // play(player2);
        // play(player3);
        // play(player4);
        webview.send("msgFromElectron", "pinggggggggggg");
      });

      function play(player) {
        document.getElementById("player1").style.visibility = "visible";
        player.addPlaylist("file:///C:/Users/Public/Videos/Sample Videos/Wildlife.wmv");
        crop: "16:9";
        player.find(".wcp-surface").unbind("click").unbind("dblclick").css("cursor", "default", "important"); // Mouse Events disable
      }

      function stopPlayer() {
        player1.stop();
        document.getElementById("player1").style.visibility = "hidden";
      }
    </script>
    <script src="drag.js"></script>
</body>

</html>